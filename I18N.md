# Internationalization (i18n) Implementation

This portfolio supports **Spanish (es)** and **English (en)** with Spanish as the default language.

## Configuration

### Astro Config (`astro.config.mjs`)

```javascript
i18n: {
  defaultLocale: 'es',
  locales: ['es', 'en'],
  routing: {
    prefixDefaultLocale: false, // Spanish URLs have no prefix
  }
}
```

### URL Structure

- Spanish (default): `/` → `https://sebita.dev/`
- English: `/en` → `https://sebita.dev/en/`

## Directory Structure

```
src/
├── lib/
│   └── i18n/
│       ├── index.ts        # i18n utilities and helpers
│       ├── utils.ts        # Content filtering utilities
│       ├── es.json         # Spanish translations
│       └── en.json         # English translations
├── content/
│   ├── projects/
│   │   ├── es/             # Spanish project content
│   │   │   ├── example-project-1.md
│   │   │   └── ...
│   │   └── en/             # English project content
│   │       ├── example-project-1.md
│   │       └── ...
│   └── work/
│       ├── es/             # Spanish work experience
│       └── en/             # English work experience
├── pages/
│   ├── index.astro         # Spanish home page
│   ├── projects/
│   │   └── index.astro     # Spanish projects page
│   └── en/
│       ├── index.astro     # English home page
│       └── projects/
│           └── index.astro # English projects page
└── shared/
    └── components/
        └── LanguagePicker.astro  # Language switcher component
```

## Translation Files

### Structure (`es.json` / `en.json`)

```json
{
  "nav": {
    "home": "Inicio",
    "projects": "Proyectos",
    "about": "Sobre mí"
  },
  "hero": {
    "greeting": "Hola, soy",
    "description": "Desarrollador Full Stack"
  },
  "projects": {
    "title": "Proyectos",
    "subtitle": "Algunos de mis trabajos recientes"
  }
}
```

## Usage in Components

### Get Current Locale and Translations

```astro
---
import { getLocaleFromUrl, getTranslations, type Locale } from '@/lib/i18n'

const locale = getLocaleFromUrl(Astro.url) as Locale
const t = getTranslations(locale)
---

<h1>{t.hero.greeting}</h1>
<p>{t.hero.description}</p>
```

### Filter Content by Locale

```astro
---
import { getCollection } from 'astro:content'
import { filterByLocale } from '@/lib/i18n/utils'

const locale = getLocaleFromUrl(Astro.url) as Locale
const allProjects = await getCollection('projects')
const projects = filterByLocale(allProjects, locale)
---
```

## Language Picker Component

The `LanguagePicker` component automatically generates links to switch between languages:

```astro
---
import LanguagePicker from '@/shared/components/LanguagePicker.astro'
---

<LanguagePicker />
```

## Content Collections

Content must be organized in locale-specific folders:

### Project Example

**Spanish** (`src/content/projects/es/mi-proyecto.md`):
```markdown
---
title: "Mi Proyecto Increíble"
description: "Una descripción en español"
tags: ["React", "TypeScript"]
publishDate: 2024-03-15
---

Contenido en español...
```

**English** (`src/content/projects/en/my-project.md`):
```markdown
---
title: "My Awesome Project"
description: "A description in English"
tags: ["React", "TypeScript"]
publishDate: 2024-03-15
---

English content...
```

## Adding a New Language

1. **Update Astro config** (`astro.config.mjs`):
   ```javascript
   i18n: {
     locales: ['es', 'en', 'fr'], // Add new locale
   }
   ```

2. **Create translation file** (`src/lib/i18n/fr.json`):
   ```json
   {
     "nav": {
       "home": "Accueil",
       ...
     }
   }
   ```

3. **Update i18n index** (`src/lib/i18n/index.ts`):
   ```typescript
   import fr from './fr.json'
   
   export type Locale = 'es' | 'en' | 'fr'
   
   export const translations = { es, en, fr }
   ```

4. **Create content folders**:
   ```
   src/content/projects/fr/
   src/content/work/fr/
   ```

5. **Create page routes**:
   ```
   src/pages/fr/index.astro
   src/pages/fr/projects/index.astro
   ```

## Helpers

### `getLocaleFromUrl(url: URL): Locale`
Gets the current locale from the URL pathname.

### `getTranslations(locale: Locale): TranslationKeys`
Returns all translations for the specified locale.

### `t(locale: Locale, key: string): string`
Gets a specific translation by dot notation path.

### `filterByLocale<T>(entries: CollectionEntry<T>[], locale: Locale)`
Filters content collection entries by locale.

### `getSlugWithoutLocale(id: string): string`
Removes the locale prefix from a content entry ID.

## Best Practices

1. **Always filter content by locale** when querying collections
2. **Use translation keys** instead of hardcoded strings
3. **Maintain consistent file naming** across locales
4. **Keep translation files in sync** - both should have the same structure
5. **Test all language versions** before deploying

## Notes

- The default locale (Spanish) doesn't have a URL prefix
- The language picker automatically maintains the current page when switching languages
- All content must exist in both languages for proper functionality
- The language preference is determined by the URL, not stored in cookies/localStorage
